FROM openjdk:9-jre-slim

WORKDIR /opt/Lavalink

COPY LavalinkServer/build/libs/Lavalink.jar Lavalink.jar

# ENV Var defaults (from the example)
ENV SERVER_PORT=2333 \
    SERVER_ADDRESS=0.0.0.0 \
    LAVALINK_SERVER_PASSWORD="youshallnotpass" \
    LAVALINK_SERVER_WS_PORT=80 \
    LAVALINK_SERVER_WS_HOST=0.0.0.0 \
    LAVALINK_SERVER_SOURCES_YOUTUBE=true \
    LAVALINK_SERVER_SOURCES_BANDCAMP=true \
    LAVALINK_SERVER_SOURCES_SOUNDCLOUD=true \
    LAVALINK_SERVER_SOURCES_TWITCH=true \
    LAVALINK_SERVER_SOURCES_VIMEO=true \
    LAVALINK_SERVER_SOURCES_MIXER=true \
    LAVALINK_SERVER_SOURCES_HTTP=true \
    LAVALINK_SERVER_SOURCES_LOCAL=false \
    LAVALINK_SERVER_SENTRY_DSN="" \
    LAVALINK_SERVER_BUFFER_DURATION_MS=400 \
    LAVALINK_SERVER_YOUTUBE_PLAYLIST_LOAD_LIMIT=600

ENTRYPOINT ["java", "-jar", "-Xmx128m", "Lavalink.jar"]
